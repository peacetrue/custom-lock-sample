= 锁

如何解决 xref:concurrent-problem.adoc[] 呢？那就是锁。锁用于保证同一时刻只有一个线程能执行特定的代码块。

对锁来说，具有两个最基础的方法：

. lock：加锁
. unlock：解锁

接口如下：

.CustomLock
[source%nowrap,java]
----
include::{sourcedir}/com/github/peacetrue/sample/lock/CustomLock.java[tag=class]
----

测试代码如下（尚缺一个锁实现）：

.CounterTest
[source%nowrap,java]
----
include::{testsourcedir}/com/github/peacetrue/sample/lock/CounterTest.java[tags=class-start;testCustomLock;class-end;]
----

.LockCounter
[source%nowrap,java]
----
include::{sourcedir}/com/github/peacetrue/sample/lock/LockCounter.java[tag=class]
----

.CounterAdapter
[source%nowrap,java]
----
include::{sourcedir}/com/github/peacetrue/sample/lock/CounterAdapter.java[tag=class]
----



