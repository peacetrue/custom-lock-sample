= 并发带来的问题

并发带来了什么问题呢？请看下面的例子：

有一个计数器可以循环递增数值：

.Counter
[source%nowrap,java]
----
include::{sourcedir}/com/github/peacetrue/sample/lock/Counter.java[tag=class]
----

.CounterImpl
[source%nowrap,java]
----
include::{sourcedir}/com/github/peacetrue/sample/lock/CounterImpl.java[tag=class]
----

多线程并发执行，导致 `Counter.getValue()` 小于实际值：

.CounterTest
[source%nowrap,java]
----
include::{testsourcedir}/com/github/peacetrue/sample/lock/CounterTest.java[tags=class-start;concurrentProblem;class-end;]
----

原因在于线程每次调用 `Counter.getValue()` 时，不一定能获取到其他线程修改后的最新值。
